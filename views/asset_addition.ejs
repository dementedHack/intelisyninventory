<html lang="en"><head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <meta charset="utf-8">
  <title>Asset Addition!!</title>

</head>
<body>


<!--formden.js communicates with FormDen server to validate fields and submit via AJAX -->
<script type="text/javascript" src="https://formden.com/static/cdn/formden.js"></script>

<!-- Special version of Bootstrap that is isolated to content wrapped in .bootstrap-iso -->
<link rel="stylesheet" href="https://formden.com/static/cdn/bootstrap-iso.css">

<!--Font Awesome (added because you use icons in your prepend/append)-->
<link rel="stylesheet" href="https://formden.com/static/cdn/font-awesome/4.4.0/css/font-awesome.min.css">

<!-- Inline CSS based on choices in "Settings" tab -->
<style>.bootstrap-iso .formden_header h2, .bootstrap-iso .formden_header p, .bootstrap-iso form{font-family: Arial, Helvetica, sans-serif; color: black}.bootstrap-iso form button, .bootstrap-iso form button:hover{color: white !important;} .asteriskField{color: red;}</style>

<!-- HTML Form (wrapped in a .bootstrap-iso div) -->
<div class="bootstrap-iso">
 <div class="container-fluid">
  <div class="navbar-header">
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="Login.html">Intelisyn Asset Management</a>
  </div>
  <div class="collapse navbar-collapse">
      <ul class="nav navbar-nav">
          <li class="active"><a href="Dashboard.html">Dashboard</a></li>
          <li><a href="#about">Marketplace</a></li>
          <li><a href="#contact">Contact</a></li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li><a id="logoutButton" href="">Logout</a></li>
      </ul>
  </div>
  <!-- /.nav-collapse -->
  <div class="row row-offcanvas row-offcanvas-left">
        <div id="sidebarMenu">
            <div class="col-xs-6 col-sm-2 sidebar-offcanvas" id="sidebar" role="navigation" >
          <div class="sidebar-nav">
              <ul class="nav" style="margin-top: 10px;">
                  <li><a href="dashboard.html">Dashboard</a></li>
                  <li class="active"><a href="Assetts.html">Assetts</a></li>
                  <li class="nav-divider"></li>
                  <li><a href="Auction_Real_Estate.html">Auction Real Estate</a></li>
                  <li><a href="#">My Sales</a></li>
                  <li><a href="#">Create Ad</a></li>
                  <li class="nav-divider"></li>
                  <li><a href="#">Billing Info</a></li>
                  <li><a href="#">Account Settings</a></li>
                  <li><a href="#">Help</a></li>
              </ul>
          </div>
          <!--/.well -->
      </div>
  <div class="row">
   <div class="col-md-6 col-sm-6 col-sm-10">
    <div class="jumbotron">
      <a href="#" class="visible-xs" data-toggle="offcanvas"><i class="fa fa-lg fa-reorder"></i></a>
      <h1>Add Asset</span></h1>
    </div>
    <form action="javascript:void(0);" class="form-horizontal" method="GET">
      <div class="form-group ">
      <label class="control-label col-sm-2 requiredField" for="date">
       Assigned To
       <span class="asteriskField">
        *
       </span>
      </label>
      <div class="col-sm-10">
       <div class="input-group">
        <div class="input-group-addon">
         <i class="fa fa-user">
         </i>
        </div>
        <select name="assignedTo" class="form-control" id="assignedTo">
          <option value="Inventory">Inventory</option>
          <option value="Karen G.">Karen G.</option>
          <option value="Chelsea S.">Chelsea S.</option>
          <option value="Marc S.">Loren L.</option>
          <option value="Marc S.">Chris P.</option>
          <option value="Marc S.">Marc S.</option>
          <option value="Kai P.">Kai P.</option>
          <option value="Mikel W.">Mikel W.</option>
          <option value="Cheryl S.">Cheryl S.</option>
          <option value="Shawna W.">Shawna W.</option>
          <option value="Marc S.">Sara W.</option>
          <option value="Cole T.">Cole T.</option>
        </select>
       </div>
      </div>
     </div>
     <div class="form-group">
      <label class="control-label col-sm-2 requiredField">
       Vendor
       <span class="asteriskField">
        *
       </span>
      </label>
      <div class="col-sm-10">
       <div class="input-group">
        <div class="input-group-addon">
         <i class="fa fa-calendar">
         </i>
        </div>
        <input class="form-control" id="vendor" name="vendor" placeholder="HP, Microsoft, etc." type="text">
       </div>
      </div>
     </div>
     <div class="form-group ">
      <label class="control-label col-sm-2 requiredField">
       Model
       <span class="asteriskField">
        *
       </span>
      </label>
      <div class="col-sm-10">
       <div class="input-group">
        <div class="input-group-addon">
         <i class="fa fa-calendar">
         </i>
        </div>
        <input class="form-control" id="model" name="model" type="text" placeholder="Spectre, Envy, etc.">
       </div>
      </div>
     </div>
     <div class="form-group ">
      <label class="control-label col-sm-2 requiredField">
       Quantity
       <span class="asteriskField">
        *
       </span>
      </label>
      <div class="col-sm-10">
       <div class="input-group">
        <div class="input-group-addon">
         <i class="fa fa-calendar">
         </i>
        </div>
         <input class="form-control" type="number" value="1" id="quantity" name="quantity" min="0">
       </div>
      </div>
     </div>
     <div class="form-group ">
      <label class="control-label col-sm-2 requiredField">
       Description
       <span class="asteriskField">
        *
       </span>
      </label>
      <div class="col-sm-10">
       <div class="input-group">
        <div class="input-group-addon">
         <i class="fa fa-comment">
         </i>
        </div>
        <textarea class="form-control" col="32" rows ="4" name="description" id="description" style="resize: none"></textarea>
       </div>
      </div>
     </div>
     <div class="form-group ">
      <label class="control-label col-sm-2 requiredField">
       Serial Number
      </label>
      <div class="col-sm-10">
       <div class="input-group">
        <div class="input-group-addon">
         <i class="fa fa-tags" aria-hidden="true"></i>
        </div>
        <input class="form-control" id="serialNumber" type="text" name="serialNumber" placeholder="Spectre, Envy, etc.">
       </div>
      </div>
     </div>
     <div class="form-group ">
      <label class="control-label col-sm-2 requiredField" for="date">
       Category
       <span class="asteriskField">
        *
       </span>
      </label>
      <div class="col-sm-10">
       <div class="input-group">
        <div class="input-group-addon">
         <i class="fa fa-flag">
         </i>
        </div>
        <select name="category" id="category" name="category" class="form-control">
          <option value=""></option>
          <option value="Hardware">Hardware</option>
          <option value="Software">Software</option>
          <option value="ComputerSystem">Computer System</option>
        </select>
       </div>
      </div>
     </div>
     <div class="form-group ">
      <label class="control-label col-sm-2 requiredField" for="date">
       Sub-category
       <span class="asteriskField">
        *
       </span>
      </label>
      <div class="col-sm-10">
       <div class="input-group">
        <div class="input-group-addon">
         <i class="fa fa-flag">
         </i>
        </div>
        <select name="subCategory" id="subCategory" class="form-control" disabled>
          <option value=""></option>
          <option value="HDD/SSD">HDD/SSD</option>
          <option value="Monitor">Monitor</option>
        </select>
       </div>
      </div>
     </div>
     <div class="form-group ">
      <label class="control-label col-sm-2 requiredField" for="date">
       Purchase Date
       <span class="asteriskField">
        *
       </span>
      </label>
      <div class="col-sm-10">
       <div class="input-group">
        <div class="input-group-addon">
         <i class="fa fa-calendar">
         </i>
        </div>
        <input class="form-control datePicker" id="purchaseDate" name="purchaseDate" placeholder="MM/DD/YYYY" type="text">
       </div>
      </div>
     </div>
     <div class="form-group ">
      <label class="control-label col-sm-2 requiredField" for="date">
       Assignment Date
       <span class="asteriskField">
        *
       </span>
      </label>
      <div class="col-sm-10">
       <div class="input-group">
        <div class="input-group-addon">
         <i class="fa fa-calendar">
         </i>
        </div>
        <input class="form-control datePicker" id="assignmentDate" name="assignmentDate" placeholder="MM/DD/YYYY" type="text">
       </div>
      </div>
     </div>
     <div class="form-group ">
      <label class="control-label col-sm-2 requiredField" for="date">
       End of Life Date
      </label>
      <div class="col-sm-10">
       <div class="input-group">
        <div class="input-group-addon">
         <i class="fa fa-calendar">
         </i>
        </div>
        <input class="form-control datePicker" id="EOLDate" name="EOLDate" placeholder="MM/DD/YYYY" type="text">
       </div>
      </div>
     </div>
     <div class="form-group">
      <div class="col-sm-10 col-sm-offset-2">
       <input name="_honey" style="display:none" type="text">
       <button class="btn btn-primary" id="submitButton">
        Submit
       </button>
      </div>
     </div>
    </form>
   </div>
  </div>
 </div>
</div>
</body>
<script src="https://www.gstatic.com/firebasejs/4.6.0/firebase.js"></script>
<script>
  // Initialize Firebase
  var config = {
    apiKey: "AIzaSyAqVtjnVwoi5HhyWnsW7qLNSwPGYaZ-2TA",
    authDomain: "intelisynassetmanagement.firebaseapp.com",
    databaseURL: "https://intelisynassetmanagement.firebaseio.com",
    projectId: "intelisynassetmanagement",
    storageBucket: "intelisynassetmanagement.appspot.com",
    messagingSenderId: "241325053027"
  };
  firebase.initializeApp(config);
</script>

<!-- Extra JavaScript/CSS added manually in "Settings" tab -->
<!-- Include jQuery -->
<script type="text/javascript" src="https://code.jquery.com/jquery-1.11.3.min.js"></script>

<!-- Include Date Range Picker -->
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.4.1/js/bootstrap-datepicker.min.js"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.4.1/css/bootstrap-datepicker3.css">

<script>
    var subCategory = [["Peripheral", "Audio", "Telephony", "Networking", "Storage", "CPU", "Memory", "Printer","Toner"], ["Project Management", "O.S.", "Application Management"], ["Laptop", "Desktop"]] 

    var ref;
    // Get current logged in user info
    firebase.auth().onAuthStateChanged(function(UserInfo) {
    if (UserInfo) {
        // User is signed in.
      self.currentUserUID = UserInfo.uid;
      console.log(self.currentUserUID)
    } else {
        // No user is signed in. Redirect to login page
        console.log("No one is logged in")
    }
  });

  var newItemPropertiesArray = [];
  
  $(document).ready(function(){

    var date_input=$(".datePicker"); //our date input has the name "date"

    console.log(date_input.val())
    var container=$('.bootstrap-iso form').length>0 ? $('.bootstrap-iso form').parent() : "body";
    date_input.datepicker({
      format: 'mm/dd/yyyy',
      container: container,
      todayHighlight: true,
      autoclose: true,
    });

    $('#submitButton').click(function(){
      grabDataFromInputFieldsParseAndThenSendToDB();
    })
  })

  function grabDataFromInputFieldsParseAndThenSendToDB(){
    grabDataFromInputFields(pushNewKeyIntoDatabaseAndAssignToVariable);
  }

  function grabDataFromInputFields (callback){
    newItemPropertiesArray = [$("#assignedTo").val(), $("#vendor").val(),$("#model").val(), $("#quantity").val(), $("#description").val(), $("#serialNumber").val(), $("#category").val(), $("#subCategory").val(), $("#purchaseDate").val(), $("#assignmentDate").val(), $("#EOLDate").val()];
    callback();
  }

  function pushNewKeyIntoDatabaseAndAssignToVariable(callback) {
    ref = firebase.database().ref("Asset");
    newPostKey = ref.push().key;
    saveNewItemToCorrespondingDatabase(newPostKey);
  }

  function saveNewItemToCorrespondingDatabase(postKey) {
    ref = firebase.database().ref(newItemPropertiesArray[6]).child(postKey).set({
      "assignedTo" : newItemPropertiesArray[0],
      "vendor" : newItemPropertiesArray[1],
      "model" : newItemPropertiesArray[2],
      "quantity" : newItemPropertiesArray[3],
      "description" : newItemPropertiesArray[4],
      "serialNumber" : newItemPropertiesArray[5],
      "category" : newItemPropertiesArray[6],
      "subCategory" : newItemPropertiesArray[7],
      "purchaseDate" : newItemPropertiesArray[8],
      "assignmentDate" : newItemPropertiesArray[9],
      "EOLDate" : newItemPropertiesArray[10],
    });
    //Creates a new UID in the database and assigns to a variable so we can save to it
  }


</script>
</html>